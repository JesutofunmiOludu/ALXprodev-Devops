#!/bin/bash

POKEMON_LIST=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")
API_BASE_URL="https://pokeapi.co/api/v2/pokemon/"
OUTPUT_DIR="pokemon_data"

DELAY_SECONDS=0.5
mkdir -p "${OUTPUT_DIR}"

if ! command -v curl &> /dev/null
then
    echo "Error: 'curl' command is not found. Please install it to proceed."
    exit 1
fi

for POKEMON_NAME in "${POKEMON_LIST[@]}"; do
    echo "Fetching data for ${POKEMON_NAME}..."
    API_URL="${API_BASE_URL}${POKEMON_NAME}"
    OUTPUT_FILE="${OUTPUT_DIR}/${POKEMON_NAME}.json"
    curl -s "${API_URL}" -o "${OUTPUT_FILE}"
    if [ $? -eq 0 ]; then
        echo "Saved data to ${OUTPUT_FILE} ✅"
    else
        echo "Error: Failed to fetch data for ${POKEMON_NAME}. ❌"
        rm -f "${OUTPUT_FILE}"
    fi

    # Pause to prevent rate-limiting issues
    sleep ${DELAY_SECONDS}
done

echo ""
echo "Batch processing complete. All files saved in the '${OUTPUT_DIR}' directory."
